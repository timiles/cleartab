/*! For license information please see worker.bundle.js.LICENSE.txt */
(()=>{var __webpack_modules__={340:function(module){var __dirname="/",factory;"undefined"!=typeof self&&self,factory=function(){return function(){var __webpack_modules__={345:function(e,r,t){var n=t(219),o=t(751),i=t(828),s=new(t(833));function u(e,r){"string"==typeof e?this.script=e||null:(this.script=null,r=e),this.workers=[],this.tasks=[],r=r||{},this.forkArgs=Object.freeze(r.forkArgs||[]),this.forkOpts=Object.freeze(r.forkOpts||{}),this.workerThreadOpts=Object.freeze(r.workerThreadOpts||{}),this.debugPortStart=r.debugPortStart||43210,this.nodeWorker=r.nodeWorker,this.workerType=r.workerType||r.nodeWorker||"auto",this.maxQueueSize=r.maxQueueSize||1/0,this.workerTerminateTimeout=r.workerTerminateTimeout||1e3,this.onCreateWorker=r.onCreateWorker||function(){return null},this.onTerminateWorker=r.onTerminateWorker||function(){return null},r&&"maxWorkers"in r?(function(e){if(!a(e)||!c(e)||e<1)throw new TypeError("Option maxWorkers must be an integer number >= 1")}(r.maxWorkers),this.maxWorkers=r.maxWorkers):this.maxWorkers=Math.max((i.cpus||4)-1,1),r&&"minWorkers"in r&&("max"===r.minWorkers?this.minWorkers=this.maxWorkers:(function(e){if(!a(e)||!c(e)||e<0)throw new TypeError("Option minWorkers must be an integer number >= 0")}(r.minWorkers),this.minWorkers=r.minWorkers,this.maxWorkers=Math.max(this.minWorkers,this.maxWorkers)),this._ensureMinWorkers()),this._boundNext=this._next.bind(this),"thread"===this.workerType&&o.ensureWorkerThreads()}function a(e){return"number"==typeof e}function c(e){return Math.round(e)==e}u.prototype.exec=function(e,r,t){if(r&&!Array.isArray(r))throw new TypeError('Array expected as argument "params"');if("string"==typeof e){var o=n.defer();if(this.tasks.length>=this.maxQueueSize)throw new Error("Max queue size of "+this.maxQueueSize+" reached");var i=this.tasks,s={method:e,params:r,resolver:o,timeout:null,options:t};i.push(s);var u=o.promise.timeout;return o.promise.timeout=function(e){return-1!==i.indexOf(s)?(s.timeout=e,o.promise):u.call(o.promise,e)},this._next(),o.promise}if("function"==typeof e)return this.exec("run",[String(e),r]);throw new TypeError('Function or string expected as argument "method"')},u.prototype.proxy=function(){if(arguments.length>0)throw new Error("No arguments expected");var e=this;return this.exec("methods").then((function(r){var t={};return r.forEach((function(r){t[r]=function(){return e.exec(r,Array.prototype.slice.call(arguments))}})),t}))},u.prototype._next=function(){if(this.tasks.length>0){var e=this._getWorker();if(e){var r=this,t=this.tasks.shift();if(t.resolver.promise.pending){var n=e.exec(t.method,t.params,t.resolver,t.options).then(r._boundNext).catch((function(){if(e.terminated)return r._removeWorker(e)})).then((function(){r._next()}));"number"==typeof t.timeout&&n.timeout(t.timeout)}else r._next()}}},u.prototype._getWorker=function(){for(var e=this.workers,r=0;r<e.length;r++){var t=e[r];if(!1===t.busy())return t}return e.length<this.maxWorkers?(t=this._createWorkerHandler(),e.push(t),t):null},u.prototype._removeWorker=function(e){var r=this;return s.releasePort(e.debugPort),this._removeWorkerFromList(e),this._ensureMinWorkers(),new n((function(t,n){e.terminate(!1,(function(o){r.onTerminateWorker({forkArgs:e.forkArgs,forkOpts:e.forkOpts,workerThreadOpts:e.workerThreadOpts,script:e.script}),o?n(o):t(e)}))}))},u.prototype._removeWorkerFromList=function(e){var r=this.workers.indexOf(e);-1!==r&&this.workers.splice(r,1)},u.prototype.terminate=function(e,r){var t=this;this.tasks.forEach((function(e){e.resolver.reject(new Error("Pool terminated"))})),this.tasks.length=0;var o=function(e){s.releasePort(e.debugPort),this._removeWorkerFromList(e)}.bind(this),i=[];return this.workers.slice().forEach((function(n){var s=n.terminateAndNotify(e,r).then(o).always((function(){t.onTerminateWorker({forkArgs:n.forkArgs,forkOpts:n.forkOpts,workerThreadOpts:n.workerThreadOpts,script:n.script})}));i.push(s)})),n.all(i)},u.prototype.stats=function(){var e=this.workers.length,r=this.workers.filter((function(e){return e.busy()})).length;return{totalWorkers:e,busyWorkers:r,idleWorkers:e-r,pendingTasks:this.tasks.length,activeTasks:r}},u.prototype._ensureMinWorkers=function(){if(this.minWorkers)for(var e=this.workers.length;e<this.minWorkers;e++)this.workers.push(this._createWorkerHandler())},u.prototype._createWorkerHandler=function(){var e=this.onCreateWorker({forkArgs:this.forkArgs,forkOpts:this.forkOpts,workerThreadOpts:this.workerThreadOpts,script:this.script})||{};return new o(e.script||this.script,{forkArgs:e.forkArgs||this.forkArgs,forkOpts:e.forkOpts||this.forkOpts,workerThreadOpts:e.workerThreadOpts||this.workerThreadOpts,debugPort:s.nextAvailableStartingAt(this.debugPortStart),workerType:this.workerType,workerTerminateTimeout:this.workerTerminateTimeout})},e.exports=u},219:function(e){"use strict";function r(e,i){var s=this;if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if("function"!=typeof e)throw new SyntaxError("Function parameter handler(resolve, reject) missing");var u=[],a=[];this.resolved=!1,this.rejected=!1,this.pending=!0;var c=function(e,r){u.push(e),a.push(r)};this.then=function(e,n){return new r((function(r,o){var i=e?t(e,r,o):r,s=n?t(n,r,o):o;c(i,s)}),s)};var f=function(e){return s.resolved=!0,s.rejected=!1,s.pending=!1,u.forEach((function(r){r(e)})),c=function(r,t){r(e)},f=p=function(){},s},p=function(e){return s.resolved=!1,s.rejected=!0,s.pending=!1,a.forEach((function(r){r(e)})),c=function(r,t){t(e)},f=p=function(){},s};this.cancel=function(){return i?i.cancel():p(new n),s},this.timeout=function(e){if(i)i.timeout(e);else{var r=setTimeout((function(){p(new o("Promise timed out after "+e+" ms"))}),e);s.always((function(){clearTimeout(r)}))}return s},e((function(e){f(e)}),(function(e){p(e)}))}function t(e,r,t){return function(n){try{var o=e(n);o&&"function"==typeof o.then&&"function"==typeof o.catch?o.then(r,t):r(o)}catch(e){t(e)}}}function n(e){this.message=e||"promise cancelled",this.stack=(new Error).stack}function o(e){this.message=e||"timeout exceeded",this.stack=(new Error).stack}r.prototype.catch=function(e){return this.then(null,e)},r.prototype.always=function(e){return this.then(e,e)},r.all=function(e){return new r((function(r,t){var n=e.length,o=[];n?e.forEach((function(e,i){e.then((function(e){o[i]=e,0==--n&&r(o)}),(function(e){n=0,t(e)}))})):r(o)}))},r.defer=function(){var e={};return e.promise=new r((function(r,t){e.resolve=r,e.reject=t})),e},n.prototype=new Error,n.prototype.constructor=Error,n.prototype.name="CancellationError",r.CancellationError=n,o.prototype=new Error,o.prototype.constructor=Error,o.prototype.name="TimeoutError",r.TimeoutError=o,e.exports=r},751:function(e,r,t){"use strict";function n(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function o(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function i(e,r,t){return(r=function(e){var r=function(e,r){if("object"!==s(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===s(r)?r:String(r)}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}var u=t(219),a=t(828),c=t(397),f="__workerpool-terminate__";function p(){var e=l();if(!e)throw new Error("WorkerPool: workerType = 'thread' is not supported, Node >= 11.7.0 required");return e}function d(){if("function"!=typeof Worker&&("object"!==("undefined"==typeof Worker?"undefined":s(Worker))||"function"!=typeof Worker.prototype.constructor))throw new Error("WorkerPool: Web Workers not supported")}function l(){try{return c("worker_threads")}catch(e){if("object"===s(e)&&null!==e&&"MODULE_NOT_FOUND"===e.code)return null;throw e}}function h(e,r){var t=new r(e);return t.isBrowserWorker=!0,t.on=function(e,r){this.addEventListener(e,(function(e){r(e.data)}))},t.send=function(e,r){this.postMessage(e,r)},t}function m(e,r,t){var n=new r.Worker(e,function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?o(Object(t),!0).forEach((function(r){i(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({stdout:!1,stderr:!1},t));return n.isWorkerThread=!0,n.send=function(e,r){this.postMessage(e,r)},n.kill=function(){return this.terminate(),!0},n.disconnect=function(){this.terminate()},n}function k(e,r,t){var n=t.fork(e,r.forkArgs,r.forkOpts),o=n.send;return n.send=function(e){return o.call(n,e)},n.isChildProcess=!0,n}function w(e){e=e||{};var r=process.execArgv.join(" "),t=-1!==r.indexOf("--inspect"),n=-1!==r.indexOf("--debug-brk"),o=[];return t&&(o.push("--inspect="+e.debugPort),n&&o.push("--debug-brk")),process.execArgv.forEach((function(e){e.indexOf("--max-old-space-size")>-1&&o.push(e)})),Object.assign({},e,{forkArgs:e.forkArgs,forkOpts:Object.assign({},e.forkOpts,{execArgv:(e.forkOpts&&e.forkOpts.execArgv||[]).concat(o)})})}function _(e,r){var o=this,i=r||{};function s(e){for(var r in o.terminated=!0,o.processing)void 0!==o.processing[r]&&o.processing[r].resolver.reject(e);o.processing=Object.create(null)}this.script=e||function(){if("browser"===a.platform){if("undefined"==typeof Blob)throw new Error("Blob not supported by the browser");if(!window.URL||"function"!=typeof window.URL.createObjectURL)throw new Error("URL.createObjectURL not supported by the browser");var e=new Blob([t(670)],{type:"text/javascript"});return window.URL.createObjectURL(e)}return __dirname+"/worker.js"}(),this.worker=function(e,r){if("web"===r.workerType)return d(),h(e,Worker);if("thread"===r.workerType)return m(e,t=p(),r.workerThreadOpts);if("process"!==r.workerType&&r.workerType){if("browser"===a.platform)return d(),h(e,Worker);var t=l();return t?m(e,t):k(e,w(r),c("child_process"))}return k(e,w(r),c("child_process"))}(this.script,i),this.debugPort=i.debugPort,this.forkOpts=i.forkOpts,this.forkArgs=i.forkArgs,this.workerThreadOpts=i.workerThreadOpts,this.workerTerminateTimeout=i.workerTerminateTimeout,e||(this.worker.ready=!0),this.requestQueue=[],this.worker.on("message",(function(e){if(!o.terminated)if("string"==typeof e&&"ready"===e)o.worker.ready=!0,function(){var e,r=function(e,r){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(e){if("string"==typeof e)return n(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?n(e,r):void 0}}(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,u=!0,a=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return u=e.done,e},e:function(e){a=!0,s=e},f:function(){try{u||null==t.return||t.return()}finally{if(a)throw s}}}}(o.requestQueue.splice(0));try{for(r.s();!(e=r.n()).done;){var t=e.value;o.worker.send(t.message,t.transfer)}}catch(e){r.e(e)}finally{r.f()}}();else{var r=e.id,t=o.processing[r];void 0!==t&&(e.isEvent?t.options&&"function"==typeof t.options.on&&t.options.on(e.payload):(delete o.processing[r],!0===o.terminating&&o.terminate(),e.error?t.resolver.reject(function(e){for(var r=new Error(""),t=Object.keys(e),n=0;n<t.length;n++)r[t[n]]=e[t[n]];return r}(e.error)):t.resolver.resolve(e.result)))}}));var u=this.worker;this.worker.on("error",s),this.worker.on("exit",(function(e,r){var t="Workerpool Worker terminated Unexpectedly\n";t+="    exitCode: `"+e+"`\n",t+="    signalCode: `"+r+"`\n",t+="    workerpool.script: `"+o.script+"`\n",t+="    spawnArgs: `"+u.spawnargs+"`\n",t+="    spawnfile: `"+u.spawnfile+"`\n",t+="    stdout: `"+u.stdout+"`\n",t+="    stderr: `"+u.stderr+"`\n",s(new Error(t))})),this.processing=Object.create(null),this.terminating=!1,this.terminated=!1,this.cleaning=!1,this.terminationHandler=null,this.lastId=0}_.prototype.methods=function(){return this.exec("methods")},_.prototype.exec=function(e,r,t,n){t||(t=u.defer());var o=++this.lastId;this.processing[o]={id:o,resolver:t,options:n};var i={message:{id:o,method:e,params:r},transfer:n&&n.transfer};this.terminated?t.reject(new Error("Worker is terminated")):this.worker.ready?this.worker.send(i.message,i.transfer):this.requestQueue.push(i);var s=this;return t.promise.catch((function(e){if(e instanceof u.CancellationError||e instanceof u.TimeoutError)return delete s.processing[o],s.terminateAndNotify(!0).then((function(){throw e}),(function(e){throw e}));throw e}))},_.prototype.busy=function(){return this.cleaning||Object.keys(this.processing).length>0},_.prototype.terminate=function(e,r){var t=this;if(e){for(var n in this.processing)void 0!==this.processing[n]&&this.processing[n].resolver.reject(new Error("Worker terminated"));this.processing=Object.create(null)}if("function"==typeof r&&(this.terminationHandler=r),this.busy())this.terminating=!0;else{var o=function(e){if(t.terminated=!0,t.cleaning=!1,null!=t.worker&&t.worker.removeAllListeners&&t.worker.removeAllListeners("message"),t.worker=null,t.terminating=!1,t.terminationHandler)t.terminationHandler(e,t);else if(e)throw e};if(this.worker){if("function"==typeof this.worker.kill){if(this.worker.killed)return void o(new Error("worker already killed!"));var i=setTimeout((function(){t.worker&&t.worker.kill()}),this.workerTerminateTimeout);return this.worker.once("exit",(function(){clearTimeout(i),t.worker&&(t.worker.killed=!0),o()})),this.worker.ready?this.worker.send(f):this.requestQueue.push(f),void(this.cleaning=!0)}if("function"!=typeof this.worker.terminate)throw new Error("Failed to terminate worker");this.worker.terminate(),this.worker.killed=!0}o()}},_.prototype.terminateAndNotify=function(e,r){var t=u.defer();return r&&(t.promise.timeout=r),this.terminate(e,(function(e,r){e?t.reject(e):t.resolve(r)})),t.promise},e.exports=_,e.exports._tryRequireWorkerThreads=l,e.exports._setupProcessWorker=k,e.exports._setupBrowserWorker=h,e.exports._setupWorkerThreadWorker=m,e.exports.ensureWorkerThreads=p},833:function(e){"use strict";function r(){this.ports=Object.create(null),this.length=0}e.exports=r,r.prototype.nextAvailableStartingAt=function(e){for(;!0===this.ports[e];)e++;if(e>=65535)throw new Error("WorkerPool debug port limit reached: "+e+">= 65535");return this.ports[e]=!0,this.length++,e},r.prototype.releasePort=function(e){delete this.ports[e],this.length--}},828:function(e,r,t){var n=t(397),o=function(e){return void 0!==e&&null!=e.versions&&null!=e.versions.node};e.exports.isNode=o,e.exports.platform="undefined"!=typeof process&&o(process)?"node":"browser";var i=function(e){try{return n("worker_threads")}catch(e){return null}}();e.exports.isMainThread="node"===e.exports.platform?(!i||i.isMainThread)&&!process.connected:"undefined"!=typeof Window,e.exports.cpus="browser"===e.exports.platform?self.navigator.hardwareConcurrency:n("os").cpus().length},670:function(e){e.exports='!function(){var __webpack_modules__={577:function(e){e.exports=function(e,r){this.message=e,this.transfer=r}}},__webpack_module_cache__={};function __webpack_require__(e){var r=__webpack_module_cache__[e];return void 0!==r||(r=__webpack_module_cache__[e]={exports:{}},__webpack_modules__[e](r,r.exports,__webpack_require__)),r.exports}var __webpack_exports__={};!function(){var exports=__webpack_exports__,__webpack_unused_export__;function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Transfer=__webpack_require__(577),requireFoolWebpack=eval("typeof require !== \'undefined\' ? require : function (module) { throw new Error(\'Module \\" + module + \\" not found.\') }"),TERMINATE_METHOD_ID="__workerpool-terminate__",worker={exit:function(){}},WorkerThreads,parentPort;if("undefined"!=typeof self&&"function"==typeof postMessage&&"function"==typeof addEventListener)worker.on=function(e,r){addEventListener(e,function(e){r(e.data)})},worker.send=function(e){postMessage(e)};else{if("undefined"==typeof process)throw new Error("Script must be executed as a worker");try{WorkerThreads=requireFoolWebpack("worker_threads")}catch(error){if("object"!==_typeof(error)||null===error||"MODULE_NOT_FOUND"!==error.code)throw error}WorkerThreads&&null!==WorkerThreads.parentPort?(parentPort=WorkerThreads.parentPort,worker.send=parentPort.postMessage.bind(parentPort),worker.on=parentPort.on.bind(parentPort)):(worker.on=process.on.bind(process),worker.send=function(e){process.send(e)},worker.on("disconnect",function(){process.exit(1)})),worker.exit=process.exit.bind(process)}function convertError(o){return Object.getOwnPropertyNames(o).reduce(function(e,r){return Object.defineProperty(e,r,{value:o[r],enumerable:!0})},{})}function isPromise(e){return e&&"function"==typeof e.then&&"function"==typeof e.catch}worker.methods={},worker.methods.run=function(e,r){e=new Function("return ("+e+").apply(null, arguments);");return e.apply(e,r)},worker.methods.methods=function(){return Object.keys(worker.methods)},worker.terminationHandler=void 0,worker.cleanupAndExit=function(e){function r(){worker.exit(e)}if(!worker.terminationHandler)return r();var o=worker.terminationHandler(e);isPromise(o)?o.then(r,r):r()};var currentRequestId=null;worker.on("message",function(r){if(r===TERMINATE_METHOD_ID)return worker.cleanupAndExit(0);try{var e=worker.methods[r.method];if(!e)throw new Error(\'Unknown method "\'+r.method+\'"\');currentRequestId=r.id;var o=e.apply(e,r.params);isPromise(o)?o.then(function(e){e instanceof Transfer?worker.send({id:r.id,result:e.message,error:null},e.transfer):worker.send({id:r.id,result:e,error:null}),currentRequestId=null}).catch(function(e){worker.send({id:r.id,result:null,error:convertError(e)}),currentRequestId=null}):(o instanceof Transfer?worker.send({id:r.id,result:o.message,error:null},o.transfer):worker.send({id:r.id,result:o,error:null}),currentRequestId=null)}catch(e){worker.send({id:r.id,result:null,error:convertError(e)})}}),worker.register=function(e,r){if(e)for(var o in e)e.hasOwnProperty(o)&&(worker.methods[o]=e[o]);r&&(worker.terminationHandler=r.onTerminate),worker.send("ready")},worker.emit=function(e){currentRequestId&&(e instanceof Transfer?worker.send({id:currentRequestId,isEvent:!0,payload:e.message},e.transfer):worker.send({id:currentRequestId,isEvent:!0,payload:e}))},__webpack_unused_export__=worker.register,worker.emit}()}();'},397:function(module){var requireFoolWebpack=eval("typeof require !== 'undefined' ? require : function (module) { throw new Error('Module \" + module + \" not found.') }");module.exports=requireFoolWebpack},577:function(e){e.exports=function(e,r){this.message=e,this.transfer=r}},744:function(__unused_webpack_module,exports,__nested_webpack_require_47192__){function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}var Transfer=__nested_webpack_require_47192__(577),requireFoolWebpack=eval("typeof require !== 'undefined' ? require : function (module) { throw new Error('Module \" + module + \" not found.') }"),TERMINATE_METHOD_ID="__workerpool-terminate__",worker={exit:function(){}};if("undefined"!=typeof self&&"function"==typeof postMessage&&"function"==typeof addEventListener)worker.on=function(e,r){addEventListener(e,(function(e){r(e.data)}))},worker.send=function(e){postMessage(e)};else{if("undefined"==typeof process)throw new Error("Script must be executed as a worker");var WorkerThreads;try{WorkerThreads=requireFoolWebpack("worker_threads")}catch(e){if("object"!==_typeof(e)||null===e||"MODULE_NOT_FOUND"!==e.code)throw e}if(WorkerThreads&&null!==WorkerThreads.parentPort){var parentPort=WorkerThreads.parentPort;worker.send=parentPort.postMessage.bind(parentPort),worker.on=parentPort.on.bind(parentPort),worker.exit=process.exit.bind(process)}else worker.on=process.on.bind(process),worker.send=function(e){process.send(e)},worker.on("disconnect",(function(){process.exit(1)})),worker.exit=process.exit.bind(process)}function convertError(e){return Object.getOwnPropertyNames(e).reduce((function(r,t){return Object.defineProperty(r,t,{value:e[t],enumerable:!0})}),{})}function isPromise(e){return e&&"function"==typeof e.then&&"function"==typeof e.catch}worker.methods={},worker.methods.run=function(e,r){var t=new Function("return ("+e+").apply(null, arguments);");return t.apply(t,r)},worker.methods.methods=function(){return Object.keys(worker.methods)},worker.terminationHandler=void 0,worker.cleanupAndExit=function(e){var r=function(){worker.exit(e)};if(!worker.terminationHandler)return r();var t=worker.terminationHandler(e);isPromise(t)?t.then(r,r):r()};var currentRequestId=null;worker.on("message",(function(e){if(e===TERMINATE_METHOD_ID)return worker.cleanupAndExit(0);try{var r=worker.methods[e.method];if(!r)throw new Error('Unknown method "'+e.method+'"');currentRequestId=e.id;var t=r.apply(r,e.params);isPromise(t)?t.then((function(r){r instanceof Transfer?worker.send({id:e.id,result:r.message,error:null},r.transfer):worker.send({id:e.id,result:r,error:null}),currentRequestId=null})).catch((function(r){worker.send({id:e.id,result:null,error:convertError(r)}),currentRequestId=null})):(t instanceof Transfer?worker.send({id:e.id,result:t.message,error:null},t.transfer):worker.send({id:e.id,result:t,error:null}),currentRequestId=null)}catch(r){worker.send({id:e.id,result:null,error:convertError(r)})}})),worker.register=function(e,r){if(e)for(var t in e)e.hasOwnProperty(t)&&(worker.methods[t]=e[t]);r&&(worker.terminationHandler=r.onTerminate),worker.send("ready")},worker.emit=function(e){if(currentRequestId){if(e instanceof Transfer)return void worker.send({id:currentRequestId,isEvent:!0,payload:e.message},e.transfer);worker.send({id:currentRequestId,isEvent:!0,payload:e})}},exports.add=worker.register,exports.emit=worker.emit}},__webpack_module_cache__={};function __nested_webpack_require_54290__(e){var r=__webpack_module_cache__[e];if(void 0!==r)return r.exports;var t=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](t,t.exports,__nested_webpack_require_54290__),t.exports}var __nested_webpack_exports__={},exports,environment;return exports=__nested_webpack_exports__,environment=__nested_webpack_require_54290__(828),exports.pool=function(e,r){return new(__nested_webpack_require_54290__(345))(e,r)},exports.worker=function(e,r){__nested_webpack_require_54290__(744).add(e,r)},exports.workerEmit=function(e){__nested_webpack_require_54290__(744).emit(e)},exports.Promise=__nested_webpack_require_54290__(219),exports.Transfer=__nested_webpack_require_54290__(577),exports.platform=environment.platform,exports.isMainThread=environment.isMainThread,exports.cpus=environment.cpus,__nested_webpack_exports__}()},module.exports=factory()}},__webpack_module_cache__={};function __webpack_require__(e){var r=__webpack_module_cache__[e];if(void 0!==r)return r.exports;var t=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(t.exports,t,t.exports,__webpack_require__),t.exports}__webpack_require__.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(r,{a:r}),r},__webpack_require__.d=(e,r)=>{for(var t in r)__webpack_require__.o(r,t)&&!__webpack_require__.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},__webpack_require__.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r);var __webpack_exports__={};(()=>{"use strict";function e(e){return Array.isArray(e)&&e.length>0}function r(...e){const[r,...t]=e;if(t.some((e=>e.length!==r.length)))return!1;for(let e=0;e<t.length;e+=1){const n=t[e];for(let e=0;e<n.length;e+=1)if(n[e]!==r[e])return!1}return!0}function t(e){return null!=e}function n(e){return new Array(e).fill(null).map(((e,r)=>r))}var o;function i(e,r){if(e%1>0||r%1>0)throw Error(`a and b must be integers. a: ${e}, b: ${r}.`);return 0===r?Math.abs(e):i(r,e%r)}function s(e){const r=i(...e);return[e[0]/r,e[1]/r]}function u(e,r){const t=s(e),n=s(r);return t[0]===n[0]&&t[1]===n[1]}function a(e,r){const t=e.startNoteTime[1]*e.duration[1]*r[1],n=e.startNoteTime[0]*t/e.startNoteTime[1],o=e.duration[0]*t/e.duration[1],i=r[0]*t/r[1];return n<=i&&n+o>i}!function(e){e[e.Dead=0]="Dead",e[e.HammerOn=1]="HammerOn",e[e.PullOff=2]="PullOff",e[e.SlideDown=3]="SlideDown",e[e.SlideUp=4]="SlideUp",e[e.Staccato=5]="Staccato",e[e.Tie=6]="Tie"}(o||(o={}));const c="⌐¬";function f(e,r){return e<r?" ":"-"}function p({fret:e,modifier:r}){return e>=10&&r!==o.Tie?2:1}function d({fret:e,modifier:r},t){return r===o.Tie?"~".repeat(t):(r===o.Dead?"×":e.toString()).padStart(t,"-")}function l({modifier:e},r=1){if(void 0!==e)switch(e){case o.Dead:return null;case o.HammerOn:return"h".padEnd(r,c[1]);case o.PullOff:return"p".padEnd(r,c[1]);case o.SlideDown:return"\\".padStart(r,c[0]);case o.SlideUp:return"/".padEnd(r,c[1]);case o.Staccato:return".".padStart(r,c[0]);case o.Tie:return null;default:throw new Error(`Unknown NoteModifier: ${e}.`)}return null}function h(e){const r=Math.max(...e.map((e=>e.length)));return e.map((e=>`${e.padStart(r," ")}|`)).join("\n")}function m(e,r,n){if(8!==e)return!1;if(0===r.length)return!1;if(!r.every((e=>u(e.duration,[1,8]))))return!1;const[o,i]=r[0].startNoteTime,s=[8*o/i-1,8],a=n.filter(t).filter((e=>u(e.startNoteTime,s)));if(a.length!==r.length)return!1;for(let e=0;e<r.length;e+=1){const t=a.find((t=>t.string===r[e].string));if(!t||t.fret!==r[e].fret||t.modifier!==r[e].modifier)return!1}return!0}const k=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"];function w(e,r){return void 0!==e.hp&&void 0!==e.fret&&void 0!==r?.fret?e.fret<=r.fret?o.HammerOn:o.PullOff:void 0!==e.slide&&void 0!==e.fret&&void 0!==r?.fret?e.fret<=r.fret?o.SlideUp:o.SlideDown:e.dead?o.Dead:e.staccato?o.Staccato:e.tie?o.Tie:void 0}var _=__webpack_require__(340);__webpack_require__.n(_)().worker({convertSongsterrDataToTrackData:function(r){if(!r.tuning)throw new Error("Tuning data is required.");const t=new Array;let n,o;r.measures.forEach(((i,u)=>{const a={notes:[]},c=i.voices[0];let f=[0,1];if(c.beats.forEach(((e,t)=>{e.notes.forEach((n=>{if(n.rest)return;if(null==n.string)throw new Error("string not set");if(null==n.fret)throw new Error("fret not set");const o={startNoteTime:f,duration:e.duration,string:n.string,fret:n.fret};let i;const s=c.beats[t-1]??r.measures[u-1]?.voices[0].beats.at(-1);if(s){const e=s.notes.find((e=>e.string===n.string));!e||void 0===e.hp&&void 0===e?.slide||(i=w(e,n))}void 0===i&&(i=w(n)),void 0!==i&&(o.modifier=i),a.notes.push(o)}));const n=f[0]*e.duration[1]+e.duration[0]*f[1],o=f[1]*e.duration[1];f=s([n,o])})),i.signature&&(a.timeSignature=i.signature),i.repeatStart&&(n=t.length),(i.repeat&&i.repeat>1||e(i.alternateEnding))&&void 0!==n){if(e(i.alternateEnding)){void 0===o&&(o=t.length);const e=t.slice(n,o);i.alternateEnding.forEach((r=>{t.push(a),r!==i.repeat&&t.push(...e)})),i.repeat&&(n=void 0,o=void 0)}else if(i.repeat){t.push(a);const e=t.slice(n);for(let r=1;r<i.repeat;r+=1)t.push(...e);n=void 0}}else t.push(a)}));const i=r.tuning.map((e=>function(e){return k[e%12]}(e)));return{name:r.instrument,stringNames:i,bars:t}},convertTrackDataToTabData:function({stringNames:e,bars:r}){if(!r?.[0].timeSignature)throw new Error("First bar requires a time signature.");const t={tuningTab:h(e),timeSignatureTabsLookup:new Map,barTabs:new Array};let n=r[0].timeSignature,o=0;return r.forEach(((r,s)=>{r.timeSignature&&(t.timeSignatureTabsLookup.set(s,function(e,r){if(1===r)return`${e[0]}/${e[1]}:`;const t=Math.max(...e.map((e=>e.toString().length))),n=new Array(r).fill(""),o=Math.floor((r-2)/2);return n[o]=e[0].toString(),n[o+1]=e[1].toString(),n.map((e=>`${e.padStart(t," ")}:`)).join("\n")}(r.timeSignature,e.length)),n=r.timeSignature,o=r.timeSignature[0]/r.timeSignature[1]*4-1,o=Math.max(o,2));const h=r.notes.filter((e=>0===e.string)).some((e=>null!==l(e)||2===p(e)))?1:0,k=new Array(e.length+h).fill(""),w=function(e){if(e.some((e=>e%1>0)))throw Error("numbers must be integers.");return e.reduce(((e,r)=>e/i(e,r)*r),1)}(r.notes.map((e=>e.duration[1])));let _=0;const g=new Array(e.length),y=n[0]*w/n[1];for(let e=0;e<y;e+=1){const t=r.notes.filter((r=>u(r.startNoteTime,[e,w]))),n=t.length>0?Math.max(...t.map(p)):1,i=m(w,t,g);i?_+=1:_=0;for(let r=0;r<k.length;r+=1){const s=r-h,u=t.find((e=>e.string===s)),m=g[s];if(u)if(i){if(_<o&&(k[r]+="’"),_===o){const e=k[r].length-_+1;k[r]=k[r].substring(0,e),k[r]+="”"}}else k[r]+=d(u,n);else if(i){if(_<o&&(k[r]+=f(r,h)),_===o){const e=k[r].length-_+1;k[r]=k[r].substring(0,e),k[r]+=f(r,h)}}else{const o=t.find((e=>e.string===s+1));if(o){const e=l(o,n);e?k[r]+=e:2===p(o)?k[r]+=c:k[r]+=f(r,h).repeat(n)}else m&&a(m,[e,w])?k[r]+="~".repeat(n):k[r]+=f(r,h).repeat(n)}u&&(g[s]=u)}}t.barTabs.push(k.map(((e,r)=>`${e}${function(e,r){return e<r?" ":"|"}(r,h)}`)).join("\n"))})),t},findSequences:function(t){let o=new Array;for(let e=0;e<t.length;e+=1){const n=t.slice(e,e+4),i=o.find((e=>r(e.items,n)));i?i.inputIndexes.push(e):o.push({items:n,inputIndexes:[e]})}o=o.sort(((e,r)=>r.inputIndexes.length-e.inputIndexes.length));for(let e=0;e<o.length-1;e+=1){const r=o[e],t=new Array;for(let e=1;e<r.items.length;e+=1)t.push(...r.inputIndexes.map((r=>r+e)));for(let r=e+1;r<o.length;r+=1){const e=o[r];e.inputIndexes=e.inputIndexes.filter((e=>!t.includes(e))),0===e.inputIndexes.length&&(o.splice(r,1),r-=1)}o=o.sort(((e,r)=>r.inputIndexes.length-e.inputIndexes.length))}const i=o.flatMap((e=>e.inputIndexes)).sort(((e,r)=>e-r));for(let e=0;e<i.length-1;e+=1){const t=i[e],n=i[e+1]-t;if(n<4){const e=o.findIndex((e=>e.inputIndexes.includes(t))),i=o[e],s=i.items.slice(0,n),u=o.find((e=>r(e.items,s)));u?u.inputIndexes.push(t):o.push({items:s,inputIndexes:[t]}),i.inputIndexes=i.inputIndexes.filter((e=>e!==t)),0===i.inputIndexes.length&&o.splice(e,1)}}for(let e=0;e<o.length;e+=1){const t=o[e];for(let i=1;i<t.items.length;i+=1)if(t.items.length%i==0){const s=n(t.items.length/i).map((e=>t.items.slice(e*i,(e+1)*i)));if(r(...s)){const n=s[0],u=t.inputIndexes.slice();for(let e=i;e<t.items.length;e+=i)u.push(...t.inputIndexes.map((r=>r+e)));const a=o.find((e=>r(e.items,n)));a?(a.inputIndexes=a.inputIndexes.concat(u).sort(((e,r)=>e-r)),o.splice(e,1),e-=1):(t.items=n,t.inputIndexes=u);break}}}o=o.sort(((e,r)=>e.inputIndexes[0]-r.inputIndexes[0]));for(let t=0;t<o.length-1;t+=1){const n=o[t];for(let i=t+1;i<o.length;i+=1){const t=o[i],s=1,u=!e(n.endings)&&4===n.items.length&&4===t.items.length&&r(n.items.slice(0,-1*s),t.items.slice(0,-1*s)),a=e(n.endings)&&n.items.length===4-s&&4===t.items.length&&r(n.items,t.items.slice(0,-1*s));u?n.endings=new Array({items:n.items.splice(-1*s,s),inputIndexes:n.inputIndexes.map((e=>e+n.items.length))},{items:t.items.splice(-1*s,s),inputIndexes:t.inputIndexes.map((e=>e+t.items.length))}):a&&n.endings.push({items:t.items.splice(-1*s,s),inputIndexes:t.inputIndexes.map((e=>e+t.items.length))}),(u||a)&&(n.inputIndexes=n.inputIndexes.concat(t.inputIndexes).sort(((e,r)=>e-r)),o.splice(i,1),i-=1)}}let s=!1;do{s=!1;for(let e=0;e<o.length-1;e+=1){const r=o[e],t=e+1,n=o[t];void 0===r.endings&&void 0===n.endings&&r.inputIndexes.length===n.inputIndexes.length&&r.inputIndexes.every((e=>n.inputIndexes.includes(e+r.items.length)))&&(r.items.push(...n.items),o.splice(t,1),s=!0)}}while(s);const u=new Array,a=e=>{const r=o.findIndex((r=>r.inputIndexes.includes(e)||r.endings?.some((r=>r.inputIndexes.includes(e)))));if(r<0)throw new Error(`Sequence not found for index: ${e}.`);const t=o[r],n=t.endings?.findIndex((r=>r.inputIndexes.includes(e+t.items.length)));return{sequenceIndex:r,endingIndex:n}};let c=0;for(;c<t.length;){const{sequenceIndex:e,endingIndex:r}=a(c),t=u.at(-1);t?.sequenceIndex===e&&t.endingIndex===r?t.times+=1:u.push({sequenceIndex:e,...void 0!==r?{endingIndex:r}:{},times:1}),c+=o[e].items.length,void 0!==r&&(c+=o[e].endings[r].items.length)}return{sequences:o.map((({items:e,endings:r})=>({items:e,...r?{endings:r.map((e=>e.items))}:{}}))),order:u}}})})()})();